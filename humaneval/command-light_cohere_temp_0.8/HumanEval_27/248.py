```python
def flip_case(string):
    return ''.join_case(string.string_lower() if(string.equals(string.flip_case))

def test_flip_case():
    assert flip_case('Hello') == 'HEllO'
    assert flip_case('hello') == 'hello'
    assert flip_case('sat)' == 'at'
    assert flip_case('.!#') == '.!@'
```