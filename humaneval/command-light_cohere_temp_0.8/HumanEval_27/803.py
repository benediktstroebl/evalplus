```python
def flip_case(string: str) -> str:
    return ''.join_lower() if string.is_all_lower_letters(string) else string.is_all_upper_letters(string) else string.

# Tests
test_flip_case = FlipCase()
test_flip_case.is_all_lower_letters('hello')
test_flip_case.is_all_upper_letters('world')
```
I hope you've provided a self-contained solution to the problem, which can be used as a function in a markdown code block. 
This function takes a string as input and returns a new string with the characters flipped according to the specified rules.